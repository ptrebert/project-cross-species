
[Run]
load_path= /home/pebert/work/code/mpggit/crossspecies
load_name= pipelines.prep.ppl_prep_epigenomes

[SpecialFiles]
encmetadata= ${EnvPaths:codebase}/annotation/datasrc/encode/encode_metadata_ro.tsv
deepmetadata= ${EnvPaths:codebase}/annotation/datasrc/deep/20170203_deep.tsv
datasetids= ${EnvPaths:codebase}/annotation/exec/datasets.tsv

[Refdata]
chromsizes= /TL/deep/fhgfs/projects/pebert/thesis/refdata/chromsizes/chrom_auto


[Pipeline]
name= CSPREPEP
bwtobg= bigWigToBedGraph {inputfile} stdout | gzip -c > {outputfile}
bgtohdfenc= creepiest.py -dmp ${EnvPaths:confdump}/convert -wrk 4 convert --task signal
 --input {{inputfiles}} --output {{outputfile}} --chrom-sizes ${Refdata:chromsizes}/{ASSM[0]}_chrom_auto.tsv
 --output-group {ASSM[0]}/signal/cov/src
normenc= creepiest.py -dmp ${EnvPaths:confdump}/norm -wrk 1 norm --input {inputfiles} --sym-link
 --replace .h5 --suffix .h5 --output-dir ${EnvPaths:workdir}/rawdata/conv/hdf --output-group {assm}/signal/cov/norm
bgtohdfdeep= creepiest.py -dmp ${EnvPaths:confdump}/convert -wrk 4 convert --task signal
 --input {{inputfiles}} --output {{outputfile}} --chrom-sizes ${Refdata:chromsizes}/{ASSM[0]}_chrom_auto.tsv
 --output-group hg19/signal/cov/src



[Ruffus]
use_threads= True
jobs= 25
verbose= 4
history_file= ${EnvPaths:ruffushist}/${Pipeline:name}_hist.sqlite
log_file= ${EnvPaths:ruffuslog}/${Pipeline:name}_ruffus.log

[JobConfig]
jobname= ${Pipeline:name}
activate= pplcs
workdir= ${EnvPaths:workdir}
outpath= ${EnvPaths:ruffusdump}
errpath= ${EnvPaths:ruffusdump}
native_spec= -l mem_free=5G,slots_free=1,tmp_free=5G
scriptdir= ${EnvPaths:ruffusdump}
keepscripts= 0

[ParallelJobConfig]
jobname= ${Pipeline:name}
activate= pplcs
workdir= ${EnvPaths:workdir}
outpath= ${EnvPaths:ruffusdump}
errpath= ${EnvPaths:ruffusdump}
native_spec= -l mem_free=40G,slots_free=4,tmp_free=5G
scriptdir= ${EnvPaths:ruffusdump}
keepscripts= 0
